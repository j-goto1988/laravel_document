## 環境設定
全設定ファイルは、configディレクトリに保存されている。
.envファイルはアプリケーションを実行している環境の設定値が書いてある。
.envファイルは暗号化もできる。

.envファイルでリストされているすべての変数は、アプリケーションがリクエストを受信すると、$_ENV PHPスーパーグローバルへロードされる。
env関数に渡2番目の値はデフォルト値。指定されたキーの環境変数が存在しない場合、この値が返される。
```PHP
$debug = env('APP_DEBUG', false);
```

現在のアプリケーション環境は、.envファイルのAPP_ENV変数により決まる。
use Illuminate\Support\Facades\App;
$environment = App::environment();

environmentメソッドに引数を渡して、環境が特定の値と一致するかどうかを判定することもできる。
環境が指定された値のいずれかに一致する場合、メソッドはtrueを返す。
```PHP
if (App::environment('local')) {
    // 環境はlocal
}
if (App::environment(['local', 'staging'])) {
    // 環境はlocalかstaging
}
```

## 設定値へのアクセス
アプリケーションのどこからでもグローバルのconfig関数を使用し、設定値へ簡単にアクセスできる。
デフォルト値も指定でき、設定オプションが存在しない場合に、返される。
```PHP
$value = config('app.timezone');
// 設定値が存在しない場合、デフォルト値を取得する
$value = config('app.timezone', 'Asia/Seoul');
```

## 設定キャッシュ
config:cache Artisanコマンドにより、アプリケーションのすべての設定オプションが1ファイルに結合され、フレームワークによってすばやくロードされる。
env関数を呼び出さないようにする必要がある。設定値には、アプリケーションのどこからでも、config関数を使用してアクセスできる。

キャッシュされた設定を削除するコマンド
```PHP
php artisan config:clear
```

## デバッグモード
config/app.php設定ファイルのdebugオプションは、エラーに関する情報が実際にユーザーに表示される量を決定する。
デフォルトでは、このオプションは、.envファイルに保存されているAPP_DEBUG環境変数の値を尊重するように設定されている。

## メンテナンスモード
アプリケーションをメンテナンスモードにすると、アプリケーションに対するリクエストに対し、すべて503画面がが表示されるようになる。

メンテナンスモードにする
```PHP
php artisan down
```

メンテナンスモードの無効化
```PHP
php artisan up
```

シークレットトークンを使い、メンテナンスモードを抜けるようにするには、secretオプションを使い、メンテナンスモードパイパストークンを指定する。
```PHP
php artisan down --secret="1630542a-246b-4b66-afa1-dd72a4c43515"
```

アプリケーションをメンテナンスモードにしたあとで、このトークンと同じURLによりブラウザでアプリケーションにアクセスすると、メンテナンスモードバイパスクッキーがそのブラウザへ発行される。
https://example.com/1630542a-246b-4b66-afa1-dd72a4c43515

この隠しルートへアクセスすると、次にアプリケーションの/ルートへリダイレクトされる。
ブラウザへこのクッキーが一度発行されると、メンテナンスモードでない状態と同様に、アプリケーションへ普通にブラウズできる。

メンテナンスモード中、全リクエストを特定のURLへリダイレクトすることも可能。
```PHP
php artisan down --redirect=/
```

メンテナンスモードではアプリケーションに数秒のダウンタイムが必要なため、Laravelを使う開発においてはダウンタイムゼロを達成するために、Laravel VaporやEnvoyerなどの代替手段を使う。

